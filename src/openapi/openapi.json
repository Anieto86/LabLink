{
	"openapi": "3.0.3",
	"info": {
		"title": "LabLink API",
		"description": "BioTrack Laboratory Management System - RESTful API for managing laboratory operations, samples, and user authentication.",
		"version": "1.0.0",
		"contact": {
			"name": "LabLink Development Team",
			"email": "dev@lablink.com"
		},
		"license": {
			"name": "MIT",
			"url": "https://opensource.org/licenses/MIT"
		}
	},
	"servers": [
		{
			"url": "http://localhost:3000",
			"description": "Development server"
		},
		{
			"url": "https://api.lablink.com",
			"description": "Production server"
		}
	],
	"tags": [
		{
			"name": "Authentication",
			"description": "User authentication and authorization endpoints"
		},
		{
			"name": "Users",
			"description": "User management operations"
		},
		{
			"name": "Health",
			"description": "System health and monitoring"
		}
	],
	"paths": {
		"/health": {
			"get": {
				"tags": ["Health"],
				"summary": "Health check endpoint",
				"description": "Returns the health status of the API service",
				"operationId": "getHealth",
				"responses": {
					"200": {
						"description": "Service is healthy",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"status": {
											"type": "string",
											"example": "OK"
										},
										"timestamp": {
											"type": "string",
											"format": "date-time"
										},
										"uptime": {
											"type": "number",
											"description": "Uptime in seconds"
										}
									}
								}
							}
						}
					}
				}
			}
		},
		"/auth/register": {
			"post": {
				"tags": ["Authentication"],
				"summary": "Register a new user",
				"description": "Creates a new user account with email and password",
				"operationId": "registerUser",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/RegisterRequest"
							}
						}
					}
				},
				"responses": {
					"201": {
						"description": "User created successfully",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/AuthResponse"
								}
							}
						}
					},
					"400": {
						"description": "Bad request - validation errors",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					}
				}
			}
		},
		"/auth/login": {
			"post": {
				"tags": ["Authentication"],
				"summary": "User login",
				"description": "Authenticates user and returns access and refresh tokens",
				"operationId": "loginUser",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/LoginRequest"
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Login successful",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/TokenResponse"
								}
							}
						}
					},
					"401": {
						"description": "Invalid credentials",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					}
				}
			}
		},
		"/auth/refresh": {
			"post": {
				"tags": ["Authentication"],
				"summary": "Refresh access token",
				"description": "Exchanges a refresh token for a new access token",
				"operationId": "refreshToken",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/RefreshRequest"
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Token refreshed successfully",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/TokenResponse"
								}
							}
						}
					},
					"401": {
						"description": "Invalid refresh token",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					}
				}
			}
		},
		"/auth/logout": {
			"post": {
				"tags": ["Authentication"],
				"summary": "User logout",
				"description": "Revokes the refresh token and logs out the user",
				"operationId": "logoutUser",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/RefreshRequest"
							}
						}
					}
				},
				"responses": {
					"204": {
						"description": "Logout successful"
					},
					"401": {
						"description": "Invalid refresh token",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					}
				}
			}
		},
		"/users/me": {
			"get": {
				"tags": ["Users"],
				"summary": "Get current user profile",
				"description": "Returns the profile information of the authenticated user",
				"operationId": "getCurrentUser",
				"security": [
					{
						"BearerAuth": []
					}
				],
				"responses": {
					"200": {
						"description": "User profile retrieved successfully",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/UserProfile"
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized - invalid or missing token",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					},
					"404": {
						"description": "User not found",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								}
							}
						}
					}
				}
			}
		}
	},
	"components": {
		"schemas": {
			"RegisterRequest": {
				"type": "object",
				"required": ["name", "email", "password", "role"],
				"properties": {
					"name": {
						"type": "string",
						"example": "John Doe",
						"minLength": 2,
						"maxLength": 255
					},
					"email": {
						"type": "string",
						"format": "email",
						"example": "john.doe@example.com"
					},
					"password": {
						"type": "string",
						"format": "password",
						"minLength": 8,
						"example": "SecurePassword123!"
					},
					"role": {
						"type": "string",
						"enum": ["USER", "ADMIN"],
						"example": "USER"
					}
				}
			},
			"LoginRequest": {
				"type": "object",
				"required": ["email", "password"],
				"properties": {
					"email": {
						"type": "string",
						"format": "email",
						"example": "john.doe@example.com"
					},
					"password": {
						"type": "string",
						"format": "password",
						"example": "SecurePassword123!"
					}
				}
			},
			"RefreshRequest": {
				"type": "object",
				"required": ["refresh_token"],
				"properties": {
					"refresh_token": {
						"type": "string",
						"example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
					}
				}
			},
			"AuthResponse": {
				"type": "object",
				"properties": {
					"id": {
						"type": "integer",
						"example": 1
					},
					"email": {
						"type": "string",
						"format": "email",
						"example": "john.doe@example.com"
					},
					"access_token": {
						"type": "string",
						"example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
					},
					"refresh_token": {
						"type": "string",
						"example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
					},
					"expires_in": {
						"type": "integer",
						"description": "Token expiration time in seconds",
						"example": 3600
					}
				}
			},
			"TokenResponse": {
				"type": "object",
				"properties": {
					"access_token": {
						"type": "string",
						"example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
					},
					"refresh_token": {
						"type": "string",
						"example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
					},
					"expires_in": {
						"type": "integer",
						"description": "Token expiration time in seconds",
						"example": 3600
					}
				}
			},
			"UserProfile": {
				"type": "object",
				"properties": {
					"id": {
						"type": "integer",
						"example": 1
					},
					"name": {
						"type": "string",
						"example": "John Doe"
					},
					"email": {
						"type": "string",
						"format": "email",
						"example": "john.doe@example.com"
					},
					"role": {
						"type": "string",
						"enum": ["USER", "ADMIN"],
						"example": "USER"
					},
					"isActive": {
						"type": "boolean",
						"example": true
					},
					"createdAt": {
						"type": "string",
						"format": "date-time",
						"example": "2023-11-08T10:30:00Z"
					}
				}
			},
			"ErrorResponse": {
				"type": "object",
				"properties": {
					"detail": {
						"type": "string",
						"example": "Invalid credentials"
					},
					"error": {
						"type": "string",
						"example": "UNAUTHORIZED"
					},
					"timestamp": {
						"type": "string",
						"format": "date-time",
						"example": "2023-11-08T10:30:00Z"
					}
				}
			}
		},
		"securitySchemes": {
			"BearerAuth": {
				"type": "http",
				"scheme": "bearer",
				"bearerFormat": "JWT",
				"description": "JWT Authorization header using the Bearer scheme. Example: 'Authorization: Bearer {token}'"
			}
		}
	},
	"security": [
		{
			"BearerAuth": []
		}
	]
}
